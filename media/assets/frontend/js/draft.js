webpackJsonp([12],{108:function(e,t){},109:function(e,t){},11:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),d=n(6),u=a(d),f=n(1),m=a(f),p={children:m.default.object.isRequired},h=document.getElementById("modal-wrapper"),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.el=document.createElement("div"),n}return r(t,e),s(t,[{key:"componentDidMount",value:function(){h.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){h.removeChild(this.el)}},{key:"render",value:function(){return u.default.createPortal(this.props.children,this.el)}}]),t}(c.default.Component);g.propTypes=p,t.default=g},1102:function(e,t,n){"use strict";function a(e){function t(e){var t=m(e,a);return f(t,n)}var n=u(e,this.data("settings")),a=h(p,{attributes:{input:["type"],li:["className"],code:["className"]},tagNames:["input","code"]});this.Compiler=t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1683),o=n(774),r=n(1041),s=n(1042),l=n(1043),c=n(1050),d=n(1053),u=n(89),f=n(1061),m=n(1070),p=n(786),h=n(1071).default,g=i().use(o,{commonmark:!0}).use(s).use(r).use(l,{allowDangerousHTML:!0}).use(d).use(c).use(a),w=i().use(o,{commonmark:!0}).use(r);t.processor=g,t.processorGetAST=w},131:function(e,t){},132:function(e,t){},133:function(e,t){},15:function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(38).enable(),window.Promise=n(39)),n(35),Object.assign=n(25)},1680:function(e,t,n){n(15),e.exports=n(1681)},1681:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),d=n(6),u=a(d),f=n(1),m=a(f),p=n(5),h=n(442),g=(a(h),n(2)),w=n(3),v=n(607),b=a(v),E=n(882),y=a(E),N=n(1072),C=n(9),I=a(C),O=n(1682),R=a(O),S=n(1689),_=a(S),T=n(1691),A=a(T),P=n(124),D=n(46),k=a(D),x=n(1693),L=a(x),M=n(19),F=n(11),j=a(F);n(131),n(132),n(133),n(108),n(109),n(272),n(1694),n(887);var U=n(390),B=n(7),q=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialContent=function(){switch(g.draftStatus){case"open":if(!g.draftFileExists)return void n.setState({isLoading:!1,isShowDiff:!1});if(!g.originFileExists)return void w.seafileAPI.getFileDownloadLink(g.draftRepoID,g.draftFilePath).then(function(e){w.seafileAPI.getFileContent(e.data).then(function(e){n.setState({draftContent:e.data,draftOriginContent:e.data,isLoading:!1,isShowDiff:!1})})});var e=window.location.hash;if(0===e.indexOf("#history-")){var t=e.slice(9,49),a=e.slice(50,90),i=void 0,o=void 0;n.setState({isLoading:!1,activeTab:"history"}),w.seafileAPI.listFileHistoryRecords(g.draftRepoID,g.draftFilePath,1,25).then(function(e){var r=e.data.data;n.setState({historyList:r,totalReversionCount:e.data.total_count});for(var s=0,l=r.length;s<l&&(a===r[s].commit_id&&(n.setState({activeItem:s}),i=r[s].path),t===r[s].commit_id&&(o=r[s].path),!i||!o);s++);b.default.all([w.seafileAPI.getFileRevision(g.draftRepoID,t,o),w.seafileAPI.getFileRevision(g.draftRepoID,a,i)]).then(b.default.spread(function(e,t){b.default.all([w.seafileAPI.getFileContent(e.data),w.seafileAPI.getFileContent(t.data)]).then(b.default.spread(function(e,t){n.setDiffViewerContent(t.data,e.data)}))}))})}else b.default.all([w.seafileAPI.getFileDownloadLink(g.draftRepoID,g.draftFilePath),w.seafileAPI.getFileDownloadLink(g.draftRepoID,g.draftOriginFilePath)]).then(b.default.spread(function(e,t){b.default.all([w.seafileAPI.getFileContent(e.data),w.seafileAPI.getFileContent(t.data)]).then(b.default.spread(function(e,t){n.setState({draftContent:e.data,draftOriginContent:t.data,isLoading:!1});var a=n;setTimeout(function(){a.getChangedNodes()},100)}))}));break;case"published":if(!g.originFileExists)return void n.setState({isLoading:!1,isShowDiff:!1});var r=g.siteRoot+"repo/"+g.draftRepoID+"/"+g.draftPublishVersion+"/download?p="+g.draftOriginFilePath,s=g.siteRoot+"repo/"+g.draftRepoID+"/"+g.originFileVersion+"/download?p="+g.draftOriginFilePath;b.default.all([w.seafileAPI.getFileContent(r),w.seafileAPI.getFileContent(s)]).then(b.default.spread(function(e,t){n.setState({draftContent:e.data,draftOriginContent:t.data,isLoading:!1})}))}},n.onHistoryItemClick=function(e,t,a){var i=t.commit_id,o=e.commit_id,r="history-"+i+"-"+o;n.setURL(r),n.setState({activeItem:a,isLoading:!0}),b.default.all([w.seafileAPI.getFileRevision(g.draftRepoID,o,e.path),w.seafileAPI.getFileRevision(g.draftRepoID,i,t.path)]).then(b.default.spread(function(e,t){b.default.all([w.seafileAPI.getFileContent(e.data),w.seafileAPI.getFileContent(t.data)]).then(b.default.spread(function(e,t){n.setDiffViewerContent(e.data,t.data)}))}))},n.onHistoryListChange=function(e){n.setState({historyList:e})},n.getCommentsNumber=function(){w.seafileAPI.listComments(g.draftRepoID,g.draftFilePath).then(function(e){for(var t=e.data.total_count,a=e.data.comments,i=0,o=0;o<e.data.total_count;o++)!1===a[o].resolved&&i++;n.setState({commentsNumber:t,unresolvedComments:i})})},n.addComment=function(e){e.stopPropagation(),n.getQuote(),n.quote&&n.setState({isShowCommentDialog:!0})},n.onCommentAdded=function(){n.getCommentsNumber(),n.toggleCommentDialog()},n.toggleCommentDialog=function(){n.setState({isShowCommentDialog:!n.state.isShowCommentDialog})},n.getOriginRepoInfo=function(){w.seafileAPI.getRepoInfo(g.draftRepoID).then(function(e){n.setState({originRepoName:e.data.repo_name})})},n.getDraftInfo=function(){"open"===g.draftStatus&&w.seafileAPI.getFileInfo(g.draftRepoID,g.draftFilePath).then(function(e){n.setState({draftInfo:e.data})})},n.getChangedNodes=function(){var e=n.refs.diffViewer.value.document.nodes,t=[],a="";e.map(function(e){"diff-added"===e.data.get("diff_state")&&"diff-added"!==a?t.push(e.key):"diff-removed"===e.data.get("diff_state")&&"diff-removed"!==a?t.push(e.key):"diff-replaced"===e.data.get("diff_state")&&"diff-replaced"!==a&&t.push(e.key),a=e.data.get("diff_state")}),n.setState({changedNodes:t})},n.scrollToChangedNode=function(e){if(0!=n.state.changedNodes.length){"up"===e?n.changeIndex++:n.changeIndex--,n.changeIndex>n.state.changedNodes.length-1&&(n.changeIndex=0),n.changeIndex<0&&(n.changeIndex=n.state.changedNodes.length-1);for(var t=window,a=n.state.changedNodes[n.changeIndex],i=t.document.querySelector('[data-key="'+a+'"]');-1===i.className.indexOf("diff-")&&"BODY"!==i.tagName;)i=i.parentNode;var o=n.findScrollContainer(i,t);o==t.document.body||o==t.document.documentElement?t.scrollTo(0,i.offsetTop):o.scrollTop=i.offsetTop}},n.findScrollContainer=function(e,t){for(var n=e.parentNode,a=["auto","overlay","scroll"],i=void 0;!i&&n.parentNode;){var o=t.getComputedStyle(n),r=o.overflowY;if(a.includes(r)){i=n;break}n=n.parentNode}return i||t.document.body},n.scrollToQuote=function(e,t,a){var i=n.refs.diffViewer.value.document.nodes,o=void 0;if(i.map(function(n){n.data.get("old_index")==t&&n.data.get("new_index")==e&&(o=n.key)}),"string"!==typeof o&&i.map(function(e){e.text.indexOf(a)>0&&(o=e.key)}),"string"===typeof o){for(var r=window,s=r.document.querySelector('[data-key="'+o+'"]');"CODE"===s.tagName;)s=s.parentNode;var l=n.findScrollContainer(s,r);l==r.document.body||l==r.document.documentElement?r.scrollTo(0,s.offsetTop):l.scrollTop=s.offsetTop}},n.showDiffViewer=function(){return c.default.createElement("div",null,n.state.isShowDiff?c.default.createElement(y.default,{newMarkdownContent:n.state.draftContent,oldMarkdownContent:n.state.draftOriginContent,ref:"diffViewer"}):c.default.createElement(y.default,{newMarkdownContent:n.state.draftContent,oldMarkdownContent:n.state.draftContent,ref:"diffViewer"}),c.default.createElement("i",{className:"fa fa-plus-square review-comment-btn",ref:"commentbtn",onMouseDown:n.addComment}))},n.listReviewers=function(){w.seafileAPI.listDraftReviewers(g.draftID).then(function(e){n.setState({reviewers:e.data.reviewers})})},n.onSwitchShowDiff=function(){if(!n.state.isShowDiff){var e=n;setTimeout(function(){e.getChangedNodes()},100)}n.setState({isShowDiff:!n.state.isShowDiff})},n.toggleDiffTip=function(){n.setState({showDiffTip:!n.state.showDiffTip})},n.toggleAddReviewerDialog=function(){n.state.showReviewerDialog&&n.listReviewers(),n.setState({showReviewerDialog:!n.state.showReviewerDialog})},n.showDiffButton=function(){return c.default.createElement("div",{className:"seafile-toggle-diff"},c.default.createElement("label",{className:"custom-switch",id:"toggle-diff"},c.default.createElement("input",{type:"checkbox",checked:n.state.isShowDiff&&"checked",name:"option",className:"custom-switch-input",onChange:n.onSwitchShowDiff}),c.default.createElement("span",{className:"custom-switch-indicator"})),c.default.createElement(p.Tooltip,{placement:"bottom",isOpen:n.state.showDiffTip,target:"toggle-diff",toggle:n.toggleDiffTip},(0,g.gettext)("View diff")))},n.onPublishDraft=function(){w.seafileAPI.publishDraft(g.draftID).then(function(e){n.setState({freezePublish:!n.state.freezePublish})})},n.initialDiffViewerContent=function(){w.seafileAPI.listFileHistoryRecords(g.draftRepoID,g.draftFilePath,1,25).then(function(e){n.setState({historyList:e.data.data,totalReversionCount:e.data.total_count}),e.data.data.length>1?b.default.all([w.seafileAPI.getFileRevision(g.draftRepoID,e.data.data[0].commit_id,g.draftFilePath),w.seafileAPI.getFileRevision(g.draftRepoID,e.data.data[1].commit_id,g.draftFilePath)]).then(b.default.spread(function(e,t){b.default.all([w.seafileAPI.getFileContent(e.data),w.seafileAPI.getFileContent(t.data)]).then(b.default.spread(function(e,t){n.setState({draftContent:e.data,draftOriginContent:t.data})}))})):w.seafileAPI.getFileRevision(g.draftRepoID,e.data.data[0].commit_id,g.draftFilePath).then(function(e){w.seafileAPI.getFileContent(e.data).then(function(e){n.setState({draftContent:e.data,draftOriginContent:""})})})})},n.setDiffViewerContent=function(e,t){n.setState({draftContent:e,draftOriginContent:t,isLoading:!1})},n.setURL=function(e){var t=new U(window.location.href);t.set("hash",e),window.location.href=t.toString()},n.tabItemClick=function(e){n.state.activeTab!==e&&("history"!==e&&window.location.hash&&n.setURL("#"),"reviewInfo"==e?n.initialContent():"history"==e&&n.initialDiffViewerContent(),n.setState({activeTab:e}))},n.showNavItem=function(e){switch(e){case"info":return c.default.createElement(p.NavItem,{className:"nav-item"},c.default.createElement(p.NavLink,{className:(0,k.default)({active:"reviewInfo"===n.state.activeTab}),onClick:function(){n.tabItemClick("reviewInfo")}},c.default.createElement("i",{className:"fas fa-info-circle"})));case"comments":return c.default.createElement(p.NavItem,{className:"nav-item"},c.default.createElement(p.NavLink,{className:(0,k.default)({active:"comments"===n.state.activeTab}),onClick:function(){n.tabItemClick("comments")}},c.default.createElement("i",{className:"fa fa-comments"}),n.state.commentsNumber>0&&c.default.createElement("div",{className:"comments-number"},n.state.commentsNumber)));case"history":return c.default.createElement(p.NavItem,{className:"nav-item"},c.default.createElement(p.NavLink,{className:(0,k.default)({active:"history"===n.state.activeTab}),onClick:function(){n.tabItemClick("history")}},c.default.createElement("i",{className:"fas fa-history"})))}},n.setBtnPosition=function(e){var t=window.getSelection();if(!t.rangeCount)return void(n.range=null);if(!1===t.isCollapsed){var a=t.getRangeAt(0),i=t.focusNode;if("I"===i.tagName||3!==i.nodeType&&"language-type"===i.getAttribute("class")){var o=a.cloneContents(),r=o.firstChild.firstChild;if(!r)return;var s=document.createRange();s.setStartBefore(r),s.setEndAfter(r),n.range=(0,P.findRange)(s,n.refs.diffViewer)}else n.range=(0,P.findRange)(a,n.refs.diffViewer);if(!n.range)return;var l=a.getBoundingClientRect();navigator.userAgent.indexOf("Chrome")<0&&navigator.userAgent.indexOf("Safari")>0&&a.collapsed&&0==l.top&&0==l.height&&(0==a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),l=a.getBoundingClientRect(),0==l.top&&0==l.height&&a.getClientRects().length&&(l=a.getClientRects()[0]));n.refs.commentbtn.style.top=l.top-100+n.refs.viewContent.scrollTop+"px"}else{n.refs.commentbtn.style.top="-1000px"}},n.getQuote=function(){var e=n.range;if(e){n.quote="";var t=n.refs.diffViewer.value.document,a=e,i=a.anchor,o=a.focus,r=t.getNode(i.key),s=t.getNode(o.key),l=t.getClosestInline(i.key),c=t.getClosestInline(o.key);if(l&&i.offset==r.text.length){var d=t.getClosestBlock(i.key),u=d.getNextText(i.key);u&&(e=e.moveAnchorTo(u.key,0))}if(c&&o.offset==s.text.length){var f=t.getClosestBlock(o.key),m=f.getNextText(o.key);m&&(e=e.moveFocusTo(m.key,0))}var p=t.getFragmentAtRange(e),h=n.removeNullNode(p.nodes),g=M.Document.create({nodes:h}),w=M.Value.create({document:g});n.quote=(0,N.serialize)(w.toJSON());var v=t.createSelection(e).anchor.path.slice(0,1),b=t.getNode(v);n.newIndex=b.data.get("new_index"),n.oldIndex=b.data.get("old_index")}},n.removeNullNode=function(e){var t=[];return e.map(function(e){if(e.text.trim()){var a=e.nodes;if(a&&1===a.size||!a)t.push(e);else if(a.size>1){var i=n.removeNullNode(a),o=M.Block.create({nodes:i,data:e.data,key:e.key,type:e.type});t.push(o)}}}),t},n.onResizeMouseUp=function(){n.state.inResizing&&n.setState({inResizing:!1})},n.onResizeMouseDown=function(){n.setState({inResizing:!0})},n.onResizeMouseMove=function(e){var t=100-e.nativeEvent.clientX/n.refs.main.clientWidth*100;if(t<20||t>60)return n.setState({inResizing:!1}),null;n.setState({rightPartWidth:t})},n.renderDiffButton=function(){switch(g.draftStatus){case"open":if(!g.draftFileExists||!g.originFileExists)return;return n.showDiffButton();case"published":if(!g.originFileExists)return;return n.showDiffButton()}},n.renderNavItems=function(){switch(g.draftStatus){case"open":return g.draftFileExists?c.default.createElement(p.Nav,{tabs:!0,className:"review-side-panel-nav"},n.showNavItem("info"),n.showNavItem("comments"),n.showNavItem("history")):c.default.createElement(p.Nav,{tabs:!0,className:"review-side-panel-nav"},n.showNavItem("info"));case"published":return g.originFileExists?c.default.createElement(p.Nav,{tabs:!0,className:"review-side-panel-nav"},n.showNavItem("info"),n.showNavItem("comments")):c.default.createElement(p.Nav,{tabs:!0,className:"review-side-panel-nav"},n.showNavItem("info"))}},n.renderContent=function(){switch(g.draftStatus){case"open":return g.draftFileExists?n.showDiffViewer():c.default.createElement("p",{className:"error"},(0,g.gettext)("Draft has been deleted."));case"published":return g.originFileExists?n.showDiffViewer():c.default.createElement("p",{className:"error"},(0,g.gettext)("Original file has been deleted."))}},n.state={draftContent:"",draftOriginContent:"",draftInfo:{},isLoading:!0,isShowDiff:!0,showDiffTip:!1,activeTab:"reviewInfo",commentsNumber:null,changedNodes:[],originRepoName:"",isShowCommentDialog:!1,unresolvedComments:0,activeItem:null,historyList:[],showReviewerDialog:!1,reviewers:[],inResizing:!1,rightPartWidth:30,freezePublish:!1},n.quote="",n.newIndex=null,n.oldIndex=null,n.changeIndex=-1,n.range=null,n}return r(t,e),s(t,[{key:"componentWillMount",value:function(){this.getCommentsNumber(),this.listReviewers(),this.getOriginRepoInfo(),this.getDraftInfo()}},{key:"componentDidMount",value:function(){this.initialContent(),document.addEventListener("selectionchange",this.setBtnPosition)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.setBtnPosition)}},{key:"render",value:function(){var e=this.state.inResizing?this.onResizeMouseMove:null,t=g.siteRoot+"lib/"+g.draftRepoID+"/file"+g.draftFilePath+"?mode=edit",n=!(!this.state.freezePublish&&"published"!==g.draftStatus),a=!this.state.freezePublish&&g.draftFileExists&&"rw"==g.filePermission,i=B(1e3*this.state.draftInfo.mtime).format("YYYY-MM-DD HH:mm"),o=g.siteRoot+"profile/"+encodeURIComponent(this.state.draftInfo.last_modifier_email)+"/";return c.default.createElement("div",{className:"wrapper"},c.default.createElement("div",{id:"header",className:"header review"},c.default.createElement("div",{className:"cur-file-info"},c.default.createElement("div",{className:"info-item file-feature"},c.default.createElement("span",{className:"sf2-icon-review"})),c.default.createElement("div",null,c.default.createElement("div",{className:"info-item file-info"},c.default.createElement("span",{className:"file-name"},g.draftFileName),c.default.createElement("span",{className:"mx-2 file-review"},(0,g.gettext)("Review"))),!n&&this.state.draftInfo.mtime&&c.default.createElement("div",{className:"last-modification"},c.default.createElement("a",{href:o},this.state.draftInfo.last_modifier_name),c.default.createElement("span",{className:"mx-1"},i)))),c.default.createElement("div",{className:"button-group"},this.renderDiffButton(),g.draftFileExists&&!n&&c.default.createElement("a",{href:t,className:"mx-1"},c.default.createElement(p.Button,{className:"file-operation-btn",color:"secondary"},(0,g.gettext)("Edit Draft"))),a&&c.default.createElement("button",{className:"btn btn-success file-operation-btn",title:(0,g.gettext)("Publish draft"),onClick:this.onPublishDraft},(0,g.gettext)("Publish")),n&&c.default.createElement("button",{className:"btn btn-success file-operation-btn",title:(0,g.gettext)("Published"),disabled:!0},(0,g.gettext)("Published")))),c.default.createElement("div",{id:"main",className:"main",ref:"main"},c.default.createElement("div",{className:"cur-view-container",onMouseMove:e,onMouseUp:this.onResizeMouseUp},c.default.createElement("div",{className:"cur-view-content",ref:"viewContent",style:{width:100-this.state.rightPartWidth+"%"}},this.state.isLoading?c.default.createElement("div",{className:"markdown-viewer-render-content article"},c.default.createElement(I.default,null)):c.default.createElement("div",{className:"markdown-viewer-render-content article"},this.renderContent())),c.default.createElement("div",{className:"cur-view-right-part",style:{width:this.state.rightPartWidth+"%"}},c.default.createElement("div",{className:"seafile-comment-resize",onMouseDown:this.onResizeMouseDown}),c.default.createElement("div",{className:"review-side-panel"},this.renderNavItems(),c.default.createElement(p.TabContent,{activeTab:this.state.activeTab},c.default.createElement(p.TabPane,{tabId:"reviewInfo"},c.default.createElement("div",{className:"review-side-panel-body"},c.default.createElement(H,{reviewers:this.state.reviewers,toggleAddReviewerDialog:this.toggleAddReviewerDialog}),c.default.createElement(V,null),g.draftFileExists&&c.default.createElement(W,{number:this.state.unresolvedComments}),!0===this.state.isShowDiff&&this.state.changedNodes.length>0&&c.default.createElement(X,{changedNumber:this.state.changedNodes.length,scrollToChangedNode:this.scrollToChangedNode}),c.default.createElement(G,{originRepoName:this.state.originRepoName,draftInfo:this.state.draftInfo}))),c.default.createElement(p.TabPane,{tabId:"comments",className:"comments"},c.default.createElement(R.default,{scrollToQuote:this.scrollToQuote,getCommentsNumber:this.getCommentsNumber,commentsNumber:this.state.commentsNumber,inResizing:!1})),c.default.createElement(p.TabPane,{tabId:"history",className:"history"},c.default.createElement(L.default,{activeItem:this.state.activeItem,historyList:this.state.historyList,totalReversionCount:this.state.totalReversionCount,onHistoryItemClick:this.onHistoryItemClick,onHistoryListChange:this.onHistoryListChange}))))))),this.state.showReviewerDialog&&c.default.createElement(j.default,null,c.default.createElement(A.default,{showReviewerDialog:this.state.showReviewerDialog,toggleAddReviewerDialog:this.toggleAddReviewerDialog,draftID:g.draftID,reviewers:this.state.reviewers})),this.state.isShowCommentDialog&&c.default.createElement(j.default,null,c.default.createElement(_.default,{toggleCommentDialog:this.toggleCommentDialog,onCommentAdded:this.onCommentAdded,quote:this.quote,newIndex:this.newIndex,oldIndex:this.oldIndex})))}}]),t}(c.default.Component),H=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){var e=this.props.reviewers;return c.default.createElement("div",{className:"review-side-panel-item"},c.default.createElement("div",{className:"review-side-panel-header"},(0,g.gettext)("Reviewers"),c.default.createElement("i",{className:"fa fa-cog",onClick:this.props.toggleAddReviewerDialog})),e.length>0?e.map(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;arguments[2];return c.default.createElement("div",{className:"reviewer-info",key:t},c.default.createElement("img",{className:"avatar review-side-panel-avatar",src:e.avatar_url,alt:""}),c.default.createElement("span",{className:"reviewer-name"},e.user_name))}):c.default.createElement("span",null,(0,g.gettext)("No reviewer yet.")))}}]),t}(c.default.Component),z={reviewers:m.default.array.isRequired,toggleAddReviewerDialog:m.default.func.isRequired};H.propTypes=z;var V=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"review-side-panel-item"},c.default.createElement("div",{className:"review-side-panel-header"},(0,g.gettext)("Author")),c.default.createElement("div",{className:"author-info"},c.default.createElement("img",{className:"avatar review-side-panel-avatar",src:g.authorAvatar,alt:""}),c.default.createElement("span",{className:"author-name"},g.author)))}}]),t}(c.default.Component),G=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"dirent-table-container"},c.default.createElement("table",{className:"table-thead-hidden"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{width:"25%"}),c.default.createElement("th",{width:"75%"}))),c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("th",null,(0,g.gettext)("Location")),c.default.createElement("td",null,this.props.originRepoName,g.draftFilePath)))))}}]),t}(c.default.Component),Y={originRepoName:m.default.string.isRequired};G.propTypes=Y;var W=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"review-side-panel-item"},c.default.createElement("div",{className:"review-side-panel-header"},(0,g.gettext)("Comments")),c.default.createElement("div",{className:"changes-info"},c.default.createElement("span",null,(0,g.gettext)("Unresolved comments:")," ",this.props.number)))}}]),t}(c.default.Component),Q={number:m.default.number.isRequired};W.propTypes=Q;var X=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"review-side-panel-item"},c.default.createElement("div",{className:"review-side-panel-header"},(0,g.gettext)("Changes")),c.default.createElement("div",{className:"changes-info"},c.default.createElement("span",null,(0,g.gettext)("Number of changes:")," ",this.props.changedNumber),this.props.changedNumber>0&&c.default.createElement("div",null,c.default.createElement("i",{className:"fa fa-arrow-circle-up",onClick:function(){e.props.scrollToChangedNode("down")}}),c.default.createElement("i",{className:"fa fa-arrow-circle-down",onClick:function(){e.props.scrollToChangedNode("up")}}))))}}]),t}(c.default.Component),K={changedNumber:m.default.number.isRequired,scrollToChangedNode:m.default.func.isRequired};X.propTypes=K,u.default.render(c.default.createElement(q,null),document.getElementById("wrapper"))},1682:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),d=n(1),u=a(d),f=n(1102),m=n(5),p=n(3),h=n(2),g=n(9),w=a(g),v=n(1687),b=a(v),E=n(2);n(1688);var y={getCommentsNumber:u.default.func.isRequired,inResizing:u.default.bool.isRequired,commentsNumber:u.default.number,scrollToQuote:u.default.func.isRequired},N=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listComments=function(e){p.seafileAPI.listComments(h.draftRepoID,h.draftFilePath).then(function(t){var a=[];if(t.data.comments.forEach(function(e){var t=new b.default(e);a.push(t)}),n.setState({commentsList:a}),e){var i=n;setTimeout(function(){i.refs.commentsList.scrollTo(0,1e4)},100)}})},n.handleCommentChange=function(e){n.setState({comment:e.target.value})},n.submitComment=function(){var e=n.state.comment.trim();e.length>0&&(p.seafileAPI.postComment(h.draftRepoID,h.draftFilePath,e).then(function(){n.listComments(!0),n.props.getCommentsNumber()}),n.setState({comment:""}))},n.resolveComment=function(e){p.seafileAPI.updateComment(h.draftRepoID,e.target.id,"true").then(function(e){n.props.getCommentsNumber(),n.listComments()})},n.editComment=function(e,t){p.seafileAPI.updateComment(h.draftRepoID,e,null,null,t).then(function(e){n.props.getCommentsNumber(),n.listComments()})},n.toggleResolvedComment=function(){n.setState({showResolvedComment:!n.state.showResolvedComment})},n.deleteComment=function(e){p.seafileAPI.deleteComment(h.draftRepoID,e.target.id).then(function(e){n.props.getCommentsNumber(),n.listComments()})},n.onResizeMouseUp=function(){n.state.inResizing&&n.setState({inResizing:!1})},n.onResizeMouseDown=function(){n.setState({inResizing:!0})},n.onResizeMouseMove=function(e){var t=100-(e.nativeEvent.clientY-120)/n.refs.comment.clientHeight*100;if(t<20||t>70)return t<20&&n.setState({commentFooterHeight:25}),t>70&&n.setState({commentFooterHeight:65}),n.setState({inResizing:!1}),null;n.setState({commentFooterHeight:t})},n.scrollToQuote=function(e,t,a){n.props.scrollToQuote(e,t,a),n.setState({comment:""})},n.state={commentsList:[],inResizing:!1,commentFooterHeight:25,showResolvedComment:!0,comment:""},n}return r(t,e),s(t,[{key:"componentWillMount",value:function(){this.listComments()}},{key:"componentWillReceiveProps",value:function(e){this.props.commentsNumber!==e.commentsNumber&&this.listComments()}},{key:"render",value:function(){var e=this,t=this.state.inResizing?this.onResizeMouseMove:null,n=this.props.commentsNumber,a=this.state.commentsList;return c.default.createElement("div",{className:this.state.inResizing||this.props.inResizing?"seafile-comment seafile-comment-resizing":"seafile-comment",onMouseMove:t,onMouseUp:this.onResizeMouseUp,ref:"comment"},c.default.createElement("div",{className:"seafile-comment-title"},c.default.createElement("div",{className:"seafile-comment-title-text"},(0,h.gettext)("Show resolved comments")),c.default.createElement("div",{className:"seafile-comment-title-toggle"},c.default.createElement("label",{className:"custom-switch",id:"toggle-resolved-comments"},c.default.createElement("input",{type:"checkbox",name:"option",className:"custom-switch-input",onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&"checked"}),c.default.createElement("span",{className:"custom-switch-indicator"})))),c.default.createElement("div",{style:{height:100-this.state.commentFooterHeight+"%"}},0==n&&c.default.createElement("div",{className:"seafile-comment-list"},c.default.createElement("div",{className:"comment-vacant"},(0,h.gettext)("No comment yet."))),0===a.length&&n>0&&c.default.createElement("div",{className:"seafile-comment-list"},c.default.createElement(w.default,null)),a.length>0&&c.default.createElement("ul",{className:"seafile-comment-list",ref:"commentsList"},a.length>0&&n>0&&a.map(function(t,n){return c.default.createElement(I,{item:t,key:n,showResolvedComment:e.state.showResolvedComment,resolveComment:e.resolveComment,editComment:e.editComment,scrollToQuote:e.scrollToQuote,deleteComment:e.deleteComment})}))),c.default.createElement("div",{className:"seafile-comment-footer",style:{height:this.state.commentFooterHeight+"%"}},c.default.createElement("div",{className:"seafile-comment-row-resize",onMouseDown:this.onResizeMouseDown}),c.default.createElement("div",{className:"seafile-add-comment"},c.default.createElement("textarea",{className:"add-comment-input",value:this.state.comment,placeholder:(0,h.gettext)("Add a comment."),onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),c.default.createElement(m.Button,{className:"comment-btn",color:"success",size:"sm",onClick:this.submitComment},(0,h.gettext)("Submit")))))}}]),t}(c.default.Component);N.propTypes=y;var C={item:u.default.object.isRequired,deleteComment:u.default.func.isRequired,resolveComment:u.default.func.isRequired,editComment:u.default.func.isRequired,showResolvedComment:u.default.bool.isRequired,scrollToQuote:u.default.func.isRequired},I=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleDropDownMenu=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.convertComment=function(e){f.processor.process(e.comment).then(function(e){var t=String(e);n.setState({comment:t})}),f.processor.process(e.quote).then(function(e){var t=String(e);n.setState({quote:t})})},n.scrollToQuote=function(){var e=n.props.item;n.props.scrollToQuote(e.newIndex,e.oldIndex,e.quote)},n.toggleEditComment=function(){n.setState({editable:!n.state.editable})},n.updateComment=function(e){var t=n.state.newComment;n.props.item.comment!==t&&n.props.editComment(e.target.id,t),n.toggleEditComment()},n.handleCommentChange=function(e){n.setState({newComment:e.target.value})},n.state={dropdownOpen:!1,comment:"",quote:"",newComment:n.props.item.comment,editable:!1},n}return r(t,e),s(t,[{key:"componentWillMount",value:function(){this.convertComment(this.props.item)}},{key:"componentWillReceiveProps",value:function(e){this.convertComment(e.item)}},{key:"render",value:function(){var e=this.props.item;return e.resolved&&!this.props.showResolvedComment?null:this.state.editable?c.default.createElement("li",{className:"seafile-comment-item",id:e.id},c.default.createElement("div",{className:"seafile-comment-info"},c.default.createElement("img",{className:"avatar",src:e.avatarUrl,alt:""}),c.default.createElement("div",{className:"reviewer-info"},c.default.createElement("div",{className:"reviewer-name"},e.name),c.default.createElement("div",{className:"review-time"},e.time))),c.default.createElement("div",{className:"seafile-edit-comment"},c.default.createElement("textarea",{className:"edit-comment-input",value:this.state.newComment,onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),c.default.createElement(m.Button,{className:"comment-btn",color:"success",size:"sm",onClick:this.updateComment,id:e.id},(0,h.gettext)("Update"))," ",c.default.createElement(m.Button,{className:"comment-btn",color:"secondary",size:"sm",onClick:this.toggleEditComment},(0,h.gettext)("Cancel")))):c.default.createElement("li",{className:e.resolved?"seafile-comment-item seafile-comment-item-resolved":"seafile-comment-item",id:e.id},c.default.createElement("div",{className:"seafile-comment-info"},c.default.createElement("img",{className:"avatar",src:e.avatarUrl,alt:""}),c.default.createElement("div",{className:"reviewer-info"},c.default.createElement("div",{className:"reviewer-name"},e.name),c.default.createElement("div",{className:"review-time"},e.time)),!e.resolved&&c.default.createElement(m.Dropdown,{isOpen:this.state.dropdownOpen,size:"sm",className:"seafile-comment-dropdown",toggle:this.toggleDropDownMenu},c.default.createElement(m.DropdownToggle,{className:"seafile-comment-dropdown-btn"},c.default.createElement("i",{className:"fas fa-ellipsis-v"})),c.default.createElement(m.DropdownMenu,null,e.userEmail===E.username&&c.default.createElement(m.DropdownItem,{onClick:this.props.deleteComment,className:"delete-comment",id:e.id},(0,h.gettext)("Delete")),e.userEmail===E.username&&c.default.createElement(m.DropdownItem,{onClick:this.toggleEditComment,className:"edit-comment",id:e.id},(0,h.gettext)("Edit")),c.default.createElement(m.DropdownItem,{onClick:this.props.resolveComment,className:"seafile-comment-resolved",id:e.id},(0,h.gettext)("Mark as resolved"))))),e.newIndex>=-1&&e.oldIndex>=-1&&c.default.createElement("blockquote",{className:"seafile-comment-content"},c.default.createElement("div",{onClick:this.scrollToQuote,dangerouslySetInnerHTML:{__html:this.state.quote}})),c.default.createElement("div",{className:"seafile-comment-content",dangerouslySetInnerHTML:{__html:this.state.comment}}))}}]),t}(c.default.Component);I.propTypes=C,t.default=N},1683:function(e,t,n){"use strict";function a(e,t){t.tree=e.parse(t.file)}function i(e,t,n){function a(e,a,i){e?n(e):(t.tree=a,t.file=i,n())}e.run(t.tree,t.file,a)}function o(e,t){t.file.contents=e.stringify(t.tree,t.file)}function r(){function e(){for(var e=r(),t=S.length,n=-1;++n<t;)e.use.apply(null,S[n]);return e.data(p(!0,{},T)),e}function t(){var t,n,a,i;if(A)return e;for(;++P<S.length;)t=S[P],n=t[0],a=t[1],i=null,!1!==a&&(!0===a&&(t[1]=void 0),"function"===typeof(i=n.apply(e,t.slice(1)))&&_.use(i));return A=!0,P=1/0,e}function n(t,n){return v(t)?2===arguments.length?(u("data",A),T[t]=n,e):y.call(T,t)&&T[t]||null:t?(u("data",A),T=t,e):T}function a(t){function n(e){o(e.plugins),e.settings&&(s=p(s||{},e.settings))}function a(e){if("function"===typeof e)r(e);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?r.apply(null,e):n(e)}}function o(e){var t,n;if(null===e||void 0===e);else{if(!("object"===typeof e&&"length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)a(e[n])}}function r(e,t){var n=i(e);n?(b(n[1])&&b(t)&&(t=p(n[1],t)),n[1]=t):S.push(E.call(arguments))}var s;if(u("use",A),null===t||void 0===t);else if("function"===typeof t)r.apply(null,arguments);else{if("object"!==typeof t)throw new Error("Expected usable value, not `"+t+"`");"length"in t?o(t):n(t)}return s&&(T.settings=p(T.settings||{},s)),e}function i(e){for(var t,n=S.length,a=-1;++a<n;)if(t=S[a],t[0]===e)return t}function o(n){var a,i=g(n);return t(),a=e.Parser,c("parse",a),s(a)?new a(String(i),i).parse():a(String(i),i)}function l(e,n,a){function i(t,i){function o(n,o,r){o=o||e,n?i(n):t?t(o):a(null,o,r)}_.run(e,g(n),o)}if(f(e),t(),a||"function"!==typeof n||(a=n,n=null),!a)return new Promise(i);i(null,a)}function C(e,t){function n(e,t){i=!0,h(e),a=t}var a,i=!1;return l(e,t,n),m("runSync","run",i),a}function I(n,a){var i,o=g(a);return t(),i=e.Compiler,d("stringify",i),f(n),s(i)?new i(n,o).compile():i(n,o)}function O(n,a){function i(t,i){function o(e){e?i(e):t?t(r):a(null,r)}var r=g(n);N.run(e,{file:r},o)}if(t(),c("process",e.Parser),d("process",e.Compiler),!a)return new Promise(i);i(null,a)}function R(n){function a(e){o=!0,h(e)}var i,o=!1;return t(),c("processSync",e.Parser),d("processSync",e.Compiler),i=g(n),O(i,a),m("processSync","process",o),i}var S=[],_=w(),T={},A=!1,P=-1;return e.data=n,e.freeze=t,e.attachers=S,e.use=a,e.parse=o,e.stringify=I,e.run=l,e.runSync=C,e.process=O,e.processSync=R,e}function s(e){return"function"===typeof e&&l(e.prototype)}function l(e){var t;for(t in e)return!0;return!1}function c(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function d(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function u(e,t){if(t)throw new Error(["Cannot invoke `"+e+"` on a frozen processor.\nCreate a new ","processor first, by invoking it: use `processor()` instead of ","`processor`."].join(""))}function f(e){if(!e||!v(e.type))throw new Error("Expected node, got `"+e+"`")}function m(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}var p=n(1019),h=n(1020),g=n(1684),w=n(1024),v=n(1025),b=n(1026);e.exports=r().freeze();var E=[].slice,y={}.hasOwnProperty,N=w().use(a).use(i).use(o)},1684:function(e,t,n){"use strict";function a(e,t,n){var a=this.path,i=new r(e,t,n);return a&&(i.name=a+":"+i.name,i.file=a),i.fatal=!1,this.messages.push(i),i}function i(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}function o(){var e=this.message.apply(this,arguments);return e.fatal=null,e}var r=n(1021),s=n(1685);e.exports=s;var l=s.prototype;l.message=a,l.info=o,l.fail=i,l.warn=a},1685:function(e,t,n){"use strict";(function(t){function a(e){var n,i,o;if(e){if("string"===typeof e||d(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof a))return new a(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),i=-1,o=m.length;++i<o;)n=m[i],u.call(e,n)&&(this[n]=e[n]);for(n in e)-1===m.indexOf(n)&&(this[n]=e[n])}function i(e){var t=this.contents||"";return d(t)?t.toString(e):String(t)}function o(e,t){if(-1!==e.indexOf(l.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+l.sep+"`")}function r(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function s(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}var l=n(241),c=n(1022),d=n(1686);e.exports=a;var u={}.hasOwnProperty,f=a.prototype;f.toString=i;var m=["history","path","basename","stem","extname","dirname"];Object.defineProperty(f,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){r(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(f,"dirname",{get:function(){return"string"===typeof this.path?l.dirname(this.path):void 0},set:function(e){s(this.path,"dirname"),this.path=l.join(e||"",this.basename)}}),Object.defineProperty(f,"basename",{get:function(){return"string"===typeof this.path?l.basename(this.path):void 0},set:function(e){r(e,"basename"),o(e,"basename"),this.path=l.join(this.dirname||"",e)}}),Object.defineProperty(f,"extname",{get:function(){return"string"===typeof this.path?l.extname(this.path):void 0},set:function(e){var t=e||"";if(o(t,"extname"),s(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=c(this.path,t)}}),Object.defineProperty(f,"stem",{get:function(){return"string"===typeof this.path?l.basename(this.path,this.extname):void 0},set:function(e){r(e,"stem"),o(e,"stem"),this.path=l.join(this.dirname||"",e+(this.extname||""))}})}).call(t,n(32))},1686:function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},1687:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=function e(t){a(this,e);var n=new Date(t.created_at).getTime();if(this.time=(0,o.default)(n).format("YYYY-MM-DD HH:mm"),this.id=t.id,this.avatarUrl=t.avatar_url,this.comment=t.comment,this.name=t.user_name,this.userEmail=t.user_email,this.resolved=t.resolved,t.detail){var i=JSON.parse(t.detail);this.newIndex=i.newIndex,this.oldIndex=i.oldIndex,this.quote=i.quote}};t.default=r},1688:function(e,t){},1689:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),d=n(1),u=a(d),f=n(5),m=n(3),p=n(2),h=n(1102);n(1690);var g={onCommentAdded:u.default.func.isRequired,toggleCommentDialog:u.default.func.isRequired,quote:u.default.string,newIndex:u.default.number,oldIndex:u.default.number},w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCommentChange=function(e){var t=e.target.value;n.setState({comment:t})},n.submitComment=function(){var e=n.props,t=e.quote,a=e.newIndex,i=e.oldIndex,o=n.state.comment.trim();if(0!==o.length){if(t.length>0){var r={quote:t,newIndex:a,oldIndex:i};m.seafileAPI.postComment(p.draftRepoID,p.draftFilePath,o,JSON.stringify(r)).then(function(){n.props.onCommentAdded()})}else m.seafileAPI.postComment(p.draftRepoID,p.draftFilePath,o).then(function(){n.props.onCommentAdded()});n.setState({comment:""})}},n.setQuoteText=function(e){h.processor.process(e).then(function(e){var t=String(e);n.setState({quote:t})})},n.state={comment:"",quote:""},n}return r(t,e),s(t,[{key:"componentDidMount",value:function(){this.setQuoteText(this.props.quote)}},{key:"componentWillReceiveProps",value:function(e){this.props.quote!==e.quote&&this.setQuoteText(e.quote)}},{key:"render",value:function(){return c.default.createElement("div",{className:"review-comment-dialog"},c.default.createElement("div",null,p.name),c.default.createElement("blockquote",{className:"review-comment-dialog-quote"},c.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.quote}})),c.default.createElement("textarea",{value:this.state.comment,onChange:this.handleCommentChange}),c.default.createElement("div",{className:"button-group"},c.default.createElement(f.Button,{size:"sm",color:"primary",onClick:this.submitComment},(0,p.gettext)("Submit")),c.default.createElement(f.Button,{size:"sm",color:"secondary",onClick:this.props.toggleCommentDialog},(0,p.gettext)("Cancel"))),c.default.createElement("span",{className:"review-comment-dialog-triangle"}))}}]),t}(c.default.Component);w.propTypes=g,t.default=w},1690:function(e,t){},1691:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),c=a(l),d=n(1),u=a(d),f=n(2),m=n(5),p=n(3),h=n(37),g=a(h);n(1692);var w={showReviewerDialog:u.default.bool.isRequired,draftID:u.default.string.isRequired,toggleAddReviewerDialog:u.default.func.isRequired,reviewers:u.default.array.isRequired},v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listReviewers=function(){p.seafileAPI.listDraftReviewers(n.props.draftID).then(function(e){n.setState({reviewers:e.data.reviewers})})},n.handleSelectChange=function(e){n.setState({selectedOption:e}),n.Options=[]},n.addReviewers=function(){if(n.state.selectedOption.length>0){n.refs.reviewSelect.clearSelect();for(var e=[],t=0;t<n.state.selectedOption.length;t++)e[t]=n.state.selectedOption[t].email;n.setState({loading:!0,errorMsg:[]}),p.seafileAPI.addDraftReviewers(n.props.draftID,e).then(function(e){if(e.data.failed.length>0){for(var t=[],a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];n.setState({errorMsg:t})}n.setState({selectedOption:null,loading:!1}),e.data.success.length>0&&n.listReviewers()})}},n.deleteReviewer=function(e){var t=e.target.getAttribute("name");p.seafileAPI.deleteDraftReviewer(n.props.draftID,t).then(function(e){if(200===e.data){for(var a=[],i=0;i<n.state.reviewers.length;i++)n.state.reviewers[i].user_email!==t&&a.push(n.state.reviewers[i]);n.setState({reviewers:a})}})},n.state={reviewers:n.props.reviewers,selectedOption:null,errorMsg:[],loading:!1},n.Options=[],n}return r(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.toggleAddReviewerDialog,n=this.state,a=n.reviewers,i=n.errorMsg;return c.default.createElement(m.Modal,{isOpen:!0,toggle:t},c.default.createElement(m.ModalHeader,{toggle:t},(0,f.gettext)("Request a review")),c.default.createElement(m.ModalBody,null,c.default.createElement("p",null,(0,f.gettext)("Add new reviewer")),c.default.createElement("div",{className:"add-reviewer"},c.default.createElement(g.default,{placeholder:(0,f.gettext)("Select users..."),onSelectChange:this.handleSelectChange,ref:"reviewSelect",isMulti:!0,className:"reviewer-select"}),this.state.selectedOption&&!this.state.loading?c.default.createElement(m.Button,{color:"secondary",onClick:this.addReviewers},(0,f.gettext)("Submit")):c.default.createElement(m.Button,{color:"secondary",disabled:!0},(0,f.gettext)("Submit"))),i.length>0&&i.map(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;arguments[2];return c.default.createElement("p",{className:"reviewer-select-error error",key:t},i[t].email,": ",i[t].error_msg)}),a.length>0&&a.map(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;arguments[2];return c.default.createElement("div",{className:"reviewer-select-info",key:n},c.default.createElement("div",null,c.default.createElement("img",{className:"avatar reviewer-select-avatar",src:t.avatar_url,alt:""}),c.default.createElement("span",{className:"reviewer-select-name"},t.user_name)),c.default.createElement("i",{className:"fa fa-times",name:t.user_email,onClick:e.deleteReviewer}))})),c.default.createElement(m.ModalFooter,null,c.default.createElement(m.Button,{color:"secondary",onClick:t},(0,f.gettext)("Close"))))}}]),t}(c.default.Component);v.propTypes=w,t.default=v},1692:function(e,t){},1693:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),d=a(c),u=n(607),f=(a(u),n(9)),m=a(f),p=n(7),h=a(p),g=n(3),w=n(2);n(900),h.default.locale(window.app.config.lang);var v=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=function(e,t,a,i){if(t===n.state.activeItem)return!1;n.props.onHistoryItemClick(i,a,t)},n.onScroll=function(e){var t=e.target.clientHeight,a=e.target.scrollHeight;if(t+e.target.scrollTop+1>=a&&n.props.totalReversionCount>n.perPage*n.state.currentPage){var o=n.state.currentPage+1;n.setState({currentPage:o,loading:!0}),g.seafileAPI.listFileHistoryRecords(w.draftRepoID,w.draftFilePath,o,n.perPage).then(function(e){var t=Object.assign([],n.props.historyList);n.props.onHistoryListChange([].concat(i(t),i(e.data.data))),n.setState({loading:!1})})}},n.perPage=25,n.state={currentPage:1,loading:!1},n}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"history-body"},d.default.createElement("ul",{onScroll:this.onScroll,className:"history-list-container"},this.props.historyList?this.props.historyList.map(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments[2],i=n+1;return i===a.length&&(i=n),d.default.createElement(b,{onClick:e.onClick,ctime:t.ctime,className:e.props.activeItem===n?"item-active":"",name:t.creator_name,index:n,key:n,preItem:a[i],currentItem:t})}):d.default.createElement(m.default,null),this.state.loading&&d.default.createElement("li",{className:"reloading-reversion"},d.default.createElement(m.default,null))))}}]),t}(d.default.Component),b=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=h.default.parseZone(this.props.ctime).format("YYYY-MM-DD HH:mm");return d.default.createElement("li",{onClick:function(t){return e.props.onClick(t,e.props.index,e.props.preItem,e.props.currentItem)},className:"history-list-item "+this.props.className},d.default.createElement("div",{className:"history-info"},d.default.createElement("div",{className:"time"},t),d.default.createElement("div",{className:"owner"},d.default.createElement("i",{className:"squire-icon"}),d.default.createElement("span",null,this.props.name))))}}]),t}(d.default.Component);t.default=v},1694:function(e,t){},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.isDocs="True"===window.app.config.isDocs,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=!!window.app.pageOptions.canGenerateUploadLink,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=!!window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled="True"===window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkPasswordMinLength=window.app.pageOptions.shareLinkPasswordMinLength,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.maxFileName=window.app.pageOptions.maxFileName,t.enableWiki=window.app.pageOptions.enableWiki,t.canPublishRepo=window.app.pageOptions.canPublishRepo,t.enableEncryptedLibrary=window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting=window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.canAddPublicRepo=window.app.pageOptions.canAddPublicRepo,t.canInvitePeople=window.app.pageOptions.canInvitePeople,t.canLockUnlockFile=window.app.pageOptions.canLockUnlockFile,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.sharedToken=window.wiki?window.wiki.config.sharedToken:"",t.sharedType=window.wiki?window.wiki.config.sharedType:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.useNewAPI=window.fileHistory?window.fileHistory.pageOptions.use_new_api:"",t.canDownload=window.fileHistory?window.fileHistory.pageOptions.can_download_file:"",t.canCompare=window.fileHistory?window.fileHistory.pageOptions.can_compare:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.filePermission=window.draft?window.draft.config.perm:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:""},272:function(e,t){},297:function(e,t){},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var a=n(31),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(40),r=n(2),s=new o.SeafileAPI,l=i.default.load("sfcsrftoken");s.initForSeahubUsage({siteRoot:r.siteRoot,xcsrfHeaders:l}),t.seafileAPI=s},37:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(0),d=a(c),u=n(1),f=a(u),m=n(136),p=a(m),h=n(3),g=n(2),w={placeholder:f.default.string.isRequired,onSelectChange:f.default.func.isRequired,isMulti:f.default.bool.isRequired,className:f.default.string},v=function(e){return d.default.createElement("div",l({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,g.gettext)("User not found"))},b=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=function(e){n.options=[],n.props.onSelectChange(e)},n.loadOptions=function(e,t){var a=e.trim();a.length>0&&h.seafileAPI.searchUsers(a).then(function(e){n.options=[];for(var a=0;a<e.data.users.length;a++){var i=e.data.users[a],o={};o.value=i.name,o.email=i.email,o.label=d.default.createElement(d.default.Fragment,null,d.default.createElement("img",{src:i.avatar_url,className:"select-module select-module-icon avatar",alt:""}),d.default.createElement("span",{className:"select-module select-module-name"},i.name)),n.options.push(o)}t(n.options)})},n.clearSelect=function(){n.refs.userSelect.select.onChange([],{action:"clear"})},n.options=[],n}return r(t,e),s(t,[{key:"render",value:function(){return d.default.createElement(p.default,{isClearable:!0,classNamePrefix:!0,components:{NoOptionsMessage:v},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,placeholder:this.props.placeholder,className:"user-select "+this.props.className,ref:"userSelect"})}}]),t}(d.default.Component);b.propTypes=w,t.default=b},882:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n.n(r),l=n(19),c=n(124),d=n(883),u=n(391),f=n(886),m=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),p=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return h.call(n),n.value=l.Value.create(),n.slateDiff=new d.a,n}return o(t,e),m(t,[{key:"render",value:function(){var e=this.props.newMarkdownContent,t=this.props.oldMarkdownContent,n=this.slateDiff.getDiffDocument(e,t);return this.value=l.Value.create({document:n}),s.a.createElement(c.Editor,{style:{width:"100%"},renderNode:this.renderDiffNode,renderMark:u.a,value:this.value,readOnly:!0})}}]),t}(s.a.PureComponent),h=function(){this.renderDiffNode=function(e){var t=e.node,n=e.parent,a=t.data.get("diff_state"),i=n.data.get("diff_state");return"diff-added"===a?i?"blockquote"===t.type||"code_block"===t.type?s.a.createElement("div",{className:"diff-added-container"},Object(u.b)(e)):Object(u.b)(e):s.a.createElement("div",{className:"diff-added"},Object(u.b)(e)):"diff-removed"===a?i?"blockquote"===t.type||"code_block"===t.type?s.a.createElement("div",{className:"diff-removed-container"},Object(u.b)(e)):Object(u.b)(e):s.a.createElement("div",{className:"diff-removed"},Object(u.b)(e)):"diff-replaced"===a?i?Object(u.b)(e):s.a.createElement("div",{className:"diff-replaced"},Object(u.b)(e)):Object(u.b)(e)}};t.default=p},883:function(e,t,n){"use strict";var a=n(884);n.d(t,"a",function(){return a.a})},884:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return e.object===t.object&&(e.type===t.type&&(e.isVoid===t.isVoid&&(!!c.a.isEqual(e,t)||(e.object===t.object&&"text"===e.object?Object(d.a)(u.Text.create(e).text,u.Text.create(t).text)>=.5&&"changed":e.object===t.object&&"leaf"===e.object?!!(Object(d.a)(u.Text.create(e).text,u.Text.create(t).text)>=.5&&c.a.isEqual(e.marks,t.marks))&&"changed":e.type===t.type&&(e.type.includes("ordered_list")||e.type.includes("unordered_list"))&&Object(d.a)(u.Block.create(e).text,u.Block.create(t).text)>=.5?"changed":e.type===t.type&&(e.nodes.length>1||t.nodes.length>1)&&"list_item"===e.type&&Object(d.a)(u.Block.create(e).text,u.Block.create(t).text)>=.5?"changed":e.type===t.type&&"paragraph"===e.type&&Object(d.a)(u.Block.create(e).text,u.Block.create(t).text)>=.5?"changed":e.type===t.type&&"table"===e.type&&Object(d.a)(u.Block.create(e).text,u.Block.create(t).text)>=.5?"changed":e.type===t.type&&"table_row"===e.type?"changed":e.type===t.type&&"table_cell"===e.type&&"changed"))))}function r(e,t){return e===t}function s(e,t,n,a){var i=e.slice(a.startO,a.endO+1),o=t.slice(a.startA,a.endA+1),r=n.slice(a.startB,a.endB+1);console.log("chunk stable: "+a.isStable+" ["+i+"] ["+o+"] ["+r+"]")}n.d(t,"a",function(){return h});var l=n(126),c=n.n(l),d=n(885),u=n(19),f=n(196),m=n(88),p=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),h=function(){function e(){var t=this;i(this,e),this.deepDiff=function(e,n){var a=[],i=new w({equalFunc:o});i.ArrayDiff(e,n);for(var r=0;r<i.diff.length;r++){var s=i.diff[r],l=s.changeType;if("common"===l)s.item.data&&(s.item.data.diff_state="diff-common",s.item.data.new_index=s.newIndex,s.item.data.old_index=-1);else if("added"===l)s.item.data?(s.item.data.diff_state="diff-added",s.item.data.new_index=s.newIndex,s.item.data.old_index=-1):s.item.leaves.forEach(function(e){e.marks.push(u.Mark.create("ADD"))});else if("removed"===l)s.item.data?(s.item.data.diff_state="diff-removed",s.item.data.new_index=-1,s.item.data.old_index=s.oldIndex):s.item.leaves.forEach(function(e){e.marks.push(u.Mark.create("DELETE"))});else if("replaced"===l){var c=void 0,d=s.item.type||s.item.object;"text"===d?c=t.getTextDiffLeaves(s.newItem.leaves,s.oldItem.leaves):d.includes("ordered_list")||d.includes("unordered_list")||d.includes("list_item")?c=t.deepDiff(s.newItem.nodes,s.oldItem.nodes):"table"===d||"table_row"===d||"table_cell"===d?c=t.deepDiff(s.newItem.nodes,s.oldItem.nodes,o):"paragraph"===d&&(c=t.deepDiff(s.newItem.nodes,s.oldItem.nodes)),s.item.data?(s.item.data.diff_state="diff-replaced",s.item.data.new_index=s.newIndex,s.item.data.old_index=-1,s.item.nodes=c):"text"===s.item.object&&(s.item.leaves=c)}a.push(s.item)}return a},this.getDiffDocument=function(e,n){var a=Object(f.deserialize)(e).toJSON().document.nodes,i=Object(f.deserialize)(n).toJSON().document.nodes,r=t.deepDiff(a,i,o);return r=t.splitTopDiffNodes(r),u.Document.fromJSON({nodes:r})}}return p(e,[{key:"getTextDiffLeaves",value:function(e,t){var n=new w({equalFunc:o}),i=[];n.ArrayDiff(e,t);for(var r=0;r<n.diff.length;r++){var s=n.diff[r];if("common"===s.changeType)i.push(s.item);else if("added"===s.changeType)i.push(u.Leaf.create({text:s.item.text,marks:[].concat(a(s.item.marks),[u.Mark.create({type:"ADD",data:{}})])}));else if("removed"===s.changeType)i.push(u.Leaf.create({text:s.item.text,marks:[].concat(a(s.item.marks),[u.Mark.create({type:"DELETE",data:{}})])}));else if("replaced"===s.changeType){var l=this.textDiff(s.newItem.text,s.oldItem.text,s.item.marks);i=i.concat(l)}}return i}},{key:"textDiff",value:function(e,t,n){var i=[],o=new w({equalFunc:r});o.StringDiff(e,t);var s=o.diff,l="",c=s[0].changeType;return s.forEach(function(e,t,o){var r="";"removed"===c?r="DELETE":"added"===c&&(r="ADD"),c===e.changeType?(l+=e.item,t===o.length-1&&i.push(u.Leaf.create({text:l,marks:[].concat(a(n),[u.Mark.create({type:r})])}))):e.changeType!==c&&(i.push(u.Leaf.create({text:l,marks:[].concat(a(n),[u.Mark.create({type:r})])})),c=e.changeType,l=e.item,t===o.length-1&&("removed"===c?r="DELETE":"added"===c&&(r="ADD"),i.push(u.Leaf.create({text:l,marks:[].concat(a(n),[u.Mark.create({type:r})])}))))}),i}},{key:"splitDiffParagraph",value:function(e){var t=this,n=c.a.cloneDeep(e),a=c.a.cloneDeep(e),i=[],o=[],r=[],s=[];return e.nodes.forEach(function(e,n,a){"inline"===e.object?"diff-added"===e.data.diff_state?i.push(e):"diff-removed"===e.data.diff_state?o.push(e):(i.push(e),o.push(e)):(e.leaves.forEach(function(e){var n=t.getLeafDiffMark(e);"ADD"===n?r.push(e):"DELETE"===n?s.push(e):(r.push(e),s.push(e))}),i.push({object:"text",leaves:r}),o.push({object:"text",leaves:s}),s=[],r=[])}),n.nodes=i,a.data.paragraph_state="old-paragraph",n.data.paragraph_state="new-paragraph",a.nodes=o,[a,n]}},{key:"splitTopDiffNodes",value:function(e){var t=this,n=[];return e.forEach(function(e){if("diff-replaced"===e.data.diff_state&&"paragraph"===e.type){var a=t.splitDiffParagraph(e);n.push(a[0],a[1])}else"diff-replaced"===e.data.diff_state&&"table"===e.type?(t.splitTableDiffParagraph(e),n.push(e)):n.push(e)}),n}},{key:"splitTableDiffParagraph",value:function(e){var t=this;return e.nodes.forEach(function(e,n,a){"diff-replaced"===e.data.diff_state&&e.nodes.forEach(function(e){if("diff-replaced"===e.data.diff_state&&"diff-replaced"===e.nodes[0].data.diff_state){var n=t.splitDiffParagraph(e.nodes[0]);e.nodes=n}})}),e}},{key:"getLeafDiffMark",value:function(e){var t=Object(m.Set)(e.marks);return t.has(u.Mark.create({type:"ADD"}))?"ADD":t.has(u.Mark.create({type:"DELETE"}))?"DELETE":"COMMON"}}]),e}(),g=function(){function e(t,n,a){i(this,e),this.item=t,this.newIndex=n,this.oldIndex=a}return p(e,[{key:"added",value:function(){return void 0===this.oldIndex}},{key:"removed",value:function(){return void 0===this.newIndex}},{key:"common",value:function(){return void 0!==this.oldIndex&&void 0!==this.newIndex}}]),e}(),w=function(){function e(t){i(this,e),this.equalFunc=t.equalFunc?t.equalFunc:r,void 0!=t.shouldDetectChange?this.shouldDetectChange=t.shouldDetectChange:this.shouldDetectChange=!1,this.similarityFunc=t.similarityFunc}return p(e,[{key:"addAdded",value:function(e,t){var n=new g(e,t,void 0);n.changeType="added",this.added.push(n),this.diff.push(n)}},{key:"addRemoved",value:function(e,t){var n=new g(e,void 0,t);this.removed.push(n),n.changeType="removed",this.diff.push(n)}},{key:"addReplaced",value:function(e,t,n,a){var i=new g(e,a,n);i.newItem=t,i.oldItem=e,i.changeType="replaced",this.replaced.push(i),this.diff.push(i)}},{key:"addCommon",value:function(e,t,n,a){var i=new g(e,a,n);i.newItem=t,i.changeType="common",i.oldItem=e,this.common.push(i),this.diff.push(i)}},{key:"StringDiff",value:function(e,t){var n=e.length,a=t.length,i=0,o=0,r=[];for(r[n]=[],o=a;o>=0;r[n][o--]=0);for(i=n-1;i>=0;i--)for(r[i]=[],r[i][a]=0,o=a-1;o>=0;o--)this.equalFunc(e[i],t[o])?r[i][o]=r[i+1][o+1]+1:r[i][o]=Math.max(r[i+1][o],r[i][o+1]);for(this.common=[],this.added=[],this.removed=[],this.replaced=[],this.diff=[],i=o=0;i<n&&o<a;){if(this.equalFunc(e[i],t[o])){var s=e[i],l=t[o];this.addCommon(l,s,o,i),i++,o++}else r[i+1][o]>=r[i][o+1]?(this.addAdded(e[i],i),i++):(this.addRemoved(t[o],o),o++)}for(;i<n;i++)this.addAdded(e[i],i);for(;o<a;o++)this.addRemoved(t[o],o)}},{key:"ArrayDiff",value:function(e,t,n){var a=e.length,i=t.length,o=0,r=0,s=[];for(s[a]=[],r=i;r>=0;s[a][r--]=0);for(o=a-1;o>=0;o--)for(s[o]=[],s[o][i]=0,r=i-1;r>=0;r--)this.equalFunc(e[o],t[r])?s[o][r]=s[o+1][r+1]+1:s[o][r]=Math.max(s[o+1][r],s[o][r+1]);for(this.common=[],this.added=[],this.removed=[],this.replaced=[],this.diff=[],o=r=0;o<a&&r<i;){var l=this.equalFunc(e[o],t[r]);if(l){var c=e[o],d=t[r];"changed"===l?this.addReplaced(d,c,r,o):this.addCommon(d,c,r,o),n&&n("C",r,o),o++,r++}else s[o+1][r]>=s[o][r+1]?(this.addAdded(e[o],o),n&&n("A",0,o),o++):(this.addRemoved(t[r],r),n&&n("D",r,0),r++)}for(;o<a;o++)this.addAdded(e[o],o),n&&n("A",0,o);for(;r<i;r++)this.addRemoved(t[r],r),n&&n("D",r,0)}}]),e}();!function(){function e(t){i(this,e),t=t||{},this.equalFunc=t.equalFunc?t.equalFunc:r,void 0!=t.shouldDetectChange?this.shouldDetectChange=t.shouldDetectChange:this.shouldDetectChange=!1,this.similarityFunc=t.similarityFunc,this.chunks=[],this.common=[],this.added=[],this.removed=[],this.mergedArray=[]}p(e,[{key:"printChunks",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.chunks[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;s(this.oArray,this.aArray,this.bArray,o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"diff3",value:function(e,t,n){this.oArray=e,this.aArray=t,this.bArray=n;var a=new w({equalFunc:this.equalFunc,shouldDetectChange:this.shouldDetectChange,similarityFunc:this.similarityFunc});a.ArrayDiff(t,e);var i=new w({equalFunc:this.equalFunc,shouldDetectChange:this.shouldDetectChange,similarityFunc:this.similarityFunc});i.ArrayDiff(n,e);for(var o=[],r=0;r<e.length;r++){o[r]=[];for(var s=0;s<t.length;s++)o[r][s]=0}var l=!0,c=!1,d=void 0;try{for(var u,f=a.common[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var m=u.value;o[m.oldIndex][m.newIndex]=1}}catch(e){c=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}this.M_oa=o;for(var p=[],h=0;h<e.length;h++){p[h]=[];for(var g=0;g<n.length;g++)p[h][g]=0}var v=!0,b=!1,E=void 0;try{for(var y,N=i.common[Symbol.iterator]();!(v=(y=N.next()).done);v=!0){var C=y.value;p[C.oldIndex][C.newIndex]=1}}catch(e){b=!0,E=e}finally{try{!v&&N.return&&N.return()}finally{if(b)throw E}}this.M_ob=p;if(0<e.length||0<t.length||0<n.length){var I={};I.startO=0,I.endO=e.length-1,I.startA=0,I.endA=t.length-1,I.startB=0,I.endB=n.length-1,I.isStable=void 0,this.chunks.push(I)}}},{key:"calPatchChunk",value:function(e){for(var t=e.startA;t<=e.endA;++t){for(var n=!1,a=e.startO;a<=e.endO;++a)if(1==this.M_oa[a][t]){n=!0;break}0==n&&this.mergedArray.push(this.aArray[t])}for(var i=e.startB;i<=e.endB;++i){for(var n=!1,o=e.startO;o<=e.endO;++o)if(1==this.M_ob[o][i]){n=!0;break}n||this.mergedArray.push(this.bArray[i])}}},{key:"calPatch",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.chunks[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if(o.isStable)for(var r=0;r+o.startA<=o.endA;++r){var s={};s.indexA=r+o.startA,s.indexO=r+o.startO,s.indexB=r+o.startB,this.mergedArray.push(this.aArray[s.indexA])}o.isStable||this.calPatchChunk(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}}])}()},885:function(e,t,n){"use strict";function a(e,t){if(!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e.toUpperCase()===t.toUpperCase())return 1;if(1===e.length&&1===t.length)return 0;var n=r(e),a=r(t),i=n.length+a.length,o=0;return n.forEach(function(e){for(var t,n=0;t=a[n];n++)if(e===t){o++,a.splice(n,1);break}}),2*o/i}function i(e){return Array.isArray(e)?e.reduce(function(e,t){return e.concat(i(t))},[]):[e]}function o(e){for(var t=[],n=0,a=e.length-1;n<a;n++)t[n]=e.substring(n,n+2);return t}function r(e){return i(e.toUpperCase().split(" ").map(o))}n.d(t,"a",function(){return a})},886:function(e,t){},887:function(e,t,n){n(888),n(889),n(890),n(891),n(892),n(893),n(894),n(297),n(895),n(896),n(897),n(898),n(899)},888:function(e,t){Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/]/,number:/(?:\b0x[\da-f]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?)[ful]*/i}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+(?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(?:<.+?>|("|')(?:\\?.)+?\2)/,lookbehind:!0},directive:{pattern:/(#\s*)\b(?:define|defined|elif|else|endif|error|ifdef|ifndef|if|import|include|line|pragma|undef|using)\b/,lookbehind:!0,alias:"keyword"}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c["class-name"],delete Prism.languages.c.boolean},889:function(e,t){Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(?:true|false)\b/,operator:/--?|\+\+?|!=?|<{1,2}=?|>{1,2}=?|->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|\|?|\?|\*|\/|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),Prism.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)\w+/i,lookbehind:!0}}),Prism.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}})},890:function(e,t){Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(?:abstract|add|alias|as|ascending|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|descending|do|double|dynamic|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|from|get|global|goto|group|if|implicit|in|int|interface|internal|into|is|join|let|lock|long|namespace|new|null|object|operator|orderby|out|override|params|partial|private|protected|public|readonly|ref|remove|return|sbyte|sealed|select|set|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|value|var|virtual|void|volatile|where|while|yield)\b/,string:[{pattern:/@("|')(?:\1\1|\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*?\1/,greedy:!0}],"class-name":[{pattern:/\b[A-Z]\w*(?:\.\w+)*\b(?=\s+\w+)/,inside:{punctuation:/\./}},{pattern:/(\[)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(\b(?:class|interface)\s+[A-Z]\w*(?:\.\w+)*\s*:\s*)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/((?:\b(?:class|interface|new)\s+)|(?:catch\s+\())[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}}],number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)f?/i}),Prism.languages.insertBefore("csharp","class-name",{"generic-method":{pattern:/\w+\s*<[^>\r\n]+?>\s*(?=\()/,inside:{function:/^\w+/,"class-name":{pattern:/\b[A-Z]\w*(?:\.\w+)*\b/,inside:{punctuation:/\./}},keyword:Prism.languages.csharp.keyword,punctuation:/[<>(),.:]/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),Prism.languages.dotnet=Prism.languages.csharp},891:function(e,t){Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(?:abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp-]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?[df]?/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),Prism.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}}),Prism.languages.insertBefore("java","class-name",{generics:{pattern:/<\s*\w+(?:\.\w+)?(?:\s*,\s*\w+(?:\.\w+)?)*>/i,alias:"function",inside:{keyword:Prism.languages.java.keyword,punctuation:/[<>(),.:]/}}})},892:function(e,t){Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"triple-quoted-string":{pattern:/("""|''')[\s\S]+?\1/,greedy:!0,alias:"string"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/}},893:function(e,t){Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\])*\2/,greedy:!0,lookbehind:!0},variable:/@[\w.$]+|@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURNS?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+\.?\d*|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}},894:function(e,t){Prism.languages.swift=Prism.languages.extend("clike",{string:{pattern:/("|')(\\(?:\((?:[^()]|\([^)]+\))+\)|\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/\\\((?:[^()]|\([^)]+\))+\)/,inside:{delimiter:{pattern:/^\\\(|\)$/,alias:"variable"}}}}},keyword:/\b(?:as|associativity|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic(?:Type)?|else|enum|extension|fallthrough|final|for|func|get|guard|if|import|in|infix|init|inout|internal|is|lazy|left|let|mutating|new|none|nonmutating|operator|optional|override|postfix|precedence|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|Self|set|static|struct|subscript|super|switch|throws?|try|Type|typealias|unowned|unsafe|var|weak|where|while|willSet|__(?:COLUMN__|FILE__|FUNCTION__|LINE__))\b/,number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,constant:/\b(?:nil|[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,atrule:/@\b(?:IB(?:Outlet|Designable|Action|Inspectable)|class_protocol|exported|noreturn|NS(?:Copying|Managed)|objc|UIApplicationMain|auto_closure)\b/,builtin:/\b(?:[A-Z]\S+|abs|advance|alignof(?:Value)?|assert|contains|count(?:Elements)?|debugPrint(?:ln)?|distance|drop(?:First|Last)|dump|enumerate|equal|filter|find|first|getVaList|indices|isEmpty|join|last|lexicographicalCompare|map|max(?:Element)?|min(?:Element)?|numericCast|overlaps|partition|print(?:ln)?|reduce|reflect|reverse|sizeof(?:Value)?|sort(?:ed)?|split|startsWith|stride(?:of(?:Value)?)?|suffix|swap|toDebugString|toString|transcode|underestimateCount|unsafeBitCast|with(?:ExtendedLifetime|Unsafe(?:MutablePointers?|Pointers?)|VaList))\b/}),Prism.languages.swift.string.inside.interpolation.inside.rest=Prism.languages.swift},895:function(e,t){},896:function(e,t){},897:function(e,t){!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e=[],t={},n=function(){};Prism.plugins.toolbar={};var a=Prism.plugins.toolbar.registerButton=function(n,a){var i;i="function"==typeof a?a:function(e){var t;return"function"==typeof a.onClick?(t=document.createElement("button"),t.type="button",t.addEventListener("click",function(){a.onClick.call(this,e)})):"string"==typeof a.url?(t=document.createElement("a"),t.href=a.url):t=document.createElement("span"),t.textContent=a.text,t},e.push(t[n]=i)},i=Prism.plugins.toolbar.hook=function(a){var i=a.element.parentNode;if(i&&/pre/i.test(i.nodeName)&&!i.parentNode.classList.contains("code-toolbar")){var o=document.createElement("div");o.classList.add("code-toolbar"),i.parentNode.insertBefore(o,i),o.appendChild(i);var r=document.createElement("div");r.classList.add("toolbar"),document.body.hasAttribute("data-toolbar-order")&&(e=document.body.getAttribute("data-toolbar-order").split(",").map(function(e){return t[e]||n})),e.forEach(function(e){var t=e(a);if(t){var n=document.createElement("div");n.classList.add("toolbar-item"),n.appendChild(t),r.appendChild(n)}}),o.appendChild(r)}};a("label",function(e){var t=e.element.parentNode;if(t&&/pre/i.test(t.nodeName)&&t.hasAttribute("data-label")){var n,a,i=t.getAttribute("data-label");try{a=document.querySelector("template#"+i)}catch(e){}return a?n=a.content:(t.hasAttribute("data-url")?(n=document.createElement("a"),n.href=t.getAttribute("data-url")):n=document.createElement("span"),n.textContent=i),n}}),Prism.hooks.add("complete",i)}}()},898:function(e,t){!function(){if("undefined"!=typeof self&&self.Prism&&self.document){if(!Prism.plugins.toolbar)return void console.warn("Show Languages plugin loaded before Toolbar plugin.");var e={html:"HTML",xml:"XML",svg:"SVG",mathml:"MathML",css:"CSS",clike:"C-like",javascript:"JavaScript",abap:"ABAP",actionscript:"ActionScript",apacheconf:"Apache Configuration",apl:"APL",applescript:"AppleScript",arff:"ARFF",asciidoc:"AsciiDoc",asm6502:"6502 Assembly",aspnet:"ASP.NET (C#)",autohotkey:"AutoHotkey",autoit:"AutoIt",basic:"BASIC",csharp:"C#",cpp:"C++",coffeescript:"CoffeeScript",csp:"Content-Security-Policy","css-extras":"CSS Extras",django:"Django/Jinja2",erb:"ERB",fsharp:"F#",gedcom:"GEDCOM",glsl:"GLSL",graphql:"GraphQL",http:"HTTP",hpkp:"HTTP Public-Key-Pins",hsts:"HTTP Strict-Transport-Security",ichigojam:"IchigoJam",inform7:"Inform 7",json:"JSON",latex:"LaTeX",livescript:"LiveScript",lolcode:"LOLCODE","markup-templating":"Markup templating",matlab:"MATLAB",mel:"MEL",n4js:"N4JS",nasm:"NASM",nginx:"nginx",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",opencl:"OpenCL",parigp:"PARI/GP",objectpascal:"Object Pascal",php:"PHP","php-extras":"PHP Extras",plsql:"PL/SQL",powershell:"PowerShell",properties:".properties",protobuf:"Protocol Buffers",q:"Q (kdb+ database)",jsx:"React JSX",tsx:"React TSX",renpy:"Ren'py",rest:"reST (reStructuredText)",sas:"SAS",sass:"Sass (Sass)",scss:"Sass (Scss)",sql:"SQL",soy:"Soy (Closure Template)",tap:"TAP",tt2:"Template Toolkit 2",typescript:"TypeScript",vbnet:"VB.Net",vhdl:"VHDL",vim:"vim","visual-basic":"Visual Basic",wasm:"WebAssembly",wiki:"Wiki markup",xojo:"Xojo (REALbasic)",xquery:"XQuery",yaml:"YAML"};Prism.plugins.toolbar.registerButton("show-language",function(t){var n=t.element.parentNode;if(n&&/pre/i.test(n.nodeName)){var a=n.getAttribute("data-language")||e[t.language]||t.language&&t.language.substring(0,1).toUpperCase()+t.language.substring(1);if(a){var i=document.createElement("span");return i.textContent=a,i}}})}}()},899:function(e,t){!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e="line-numbers",t=/\n(?!$)/g,n=function(e){var n=a(e),i=n["white-space"];if("pre-wrap"===i||"pre-line"===i){var o=e.querySelector("code"),r=e.querySelector(".line-numbers-rows"),s=e.querySelector(".line-numbers-sizer"),l=o.textContent.split(t);s||(s=document.createElement("span"),s.className="line-numbers-sizer",o.appendChild(s)),s.style.display="block",l.forEach(function(e,t){s.textContent=e||"\n";var n=s.getBoundingClientRect().height;r.children[t].style.height=n+"px"}),s.textContent="",s.style.display="none"}},a=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener("resize",function(){Array.prototype.forEach.call(document.querySelectorAll("pre."+e),n)}),Prism.hooks.add("complete",function(e){if(e.code){var a=e.element.parentNode,i=/\s*\bline-numbers\b\s*/;if(a&&/pre/i.test(a.nodeName)&&(i.test(a.className)||i.test(e.element.className))&&!e.element.querySelector(".line-numbers-rows")){i.test(e.element.className)&&(e.element.className=e.element.className.replace(i," ")),i.test(a.className)||(a.className+=" line-numbers");var o,r=e.code.match(t),s=r?r.length+1:1,l=new Array(s+1);l=l.join("<span></span>"),o=document.createElement("span"),o.setAttribute("aria-hidden","true"),o.className="line-numbers-rows",o.innerHTML=l,a.hasAttribute("data-start")&&(a.style.counterReset="linenumber "+(parseInt(a.getAttribute("data-start"),10)-1)),e.element.appendChild(o),n(a),Prism.hooks.run("line-numbers",e)}}}),Prism.hooks.add("line-numbers",function(e){e.plugins=e.plugins||{},e.plugins.lineNumbers=!0}),Prism.plugins.lineNumbers={getLine:function(t,n){if("PRE"===t.tagName&&t.classList.contains(e)){var a=t.querySelector(".line-numbers-rows"),i=parseInt(t.getAttribute("data-start"),10)||1,o=i+(a.children.length-1);i>n&&(n=i),n>o&&(n=o);var r=n-i;return a.children[r]}}}}}()},9:function(e,t,n){"use strict";function a(){return o.default.createElement("span",{className:"loading-icon loading-tip"})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=a},900:function(e,t){}},[1680]);